'use strict';

var LRU = require('lru-cache');

var cacheOptions = {
        max: 1000,
        maxAge: 2 * 60 * 1000   //2 min cache
    },
    threadStore = LRU(cacheOptions);

function defaultThreadContext () {
    return {
        correlationId: null,
        bufferFlushDelay: 0,
        isBufferingEnabled: false,
        isNestedCal: false
    };
}

module.exports = {
    get: function (threadId) {
        return threadStore.get(threadId) || defaultThreadContext();
    },
    set: function (threadId, data) {
        threadStore.set(threadId, data);
    }
};
