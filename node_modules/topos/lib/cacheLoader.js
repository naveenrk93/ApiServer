var fs = require('fs');
var path = require('path');

var filePath = path.resolve(__dirname, '..', 'toposcache.json');

module.exports = {
  get: function get() {
    var cache = null;

    try {
        cache = JSON.parse(fs.readFileSync(filePath, 'utf-8'));
        console.log('using a cached version of topos to connect to services, if you are having issues with service connections please delete toposcache.json');
    } catch (err) {
        console.error('toposcache.json', 'not found. All information will be captured in this run, and used for the next restart.');
    }

    return cache;
  },
  save: function save(cache) {
    fs.writeFileSync(filePath, JSON.stringify(cache, null, 4));
  }
};
